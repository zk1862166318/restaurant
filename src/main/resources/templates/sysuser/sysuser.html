<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户查询</title>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
    <script th:src="@{/layui/layui.js}"></script>
    <script th:src="@{/js/jquery-3.1.1.js}"></script>
</head>
<body>
<div>
    <div class="layui-btn-group">
        <button type="button" class="layui-btn" id="addSysUser">增加</button>
    </div>
    <div>
        <table class="layui-hide" id="userAll"></table>
    </div>
</div>
<script th:inline="none">
    layui.use(['table','layer'], function(){
        var table = layui.table;
        var layer=layui.layer;
        table.render({
            elem: '#userAll'
            ,url:'queryData'
            ,cellMinWidth: 80
            ,cols: [[
                {field:'id', width:'20%', title: 'ID', sort: true}
                ,{field:'username',width:'20%', title: '用户名'}
                ,{field:'usercode', width:'20%', title: '账号'}
                ,{field:'locked',width:'20%', title: '用户状态',templet:function(data){
                        if(data.locked==0){
                            return "启用"
                        }else if(data.locked==1){
                            return "禁用"
                        }
                    }}
                ,{field:'sysRoles.name',width:'20%',title:'角色',templet:'<div>{{d.sysRoles[0].name}}</div>'}
            ]]
            ,page: true
            ,limit:1
            ,limits:[1,2,4]
        });
        $('#addSysUser').on('click',function () {
            layer.open({
                title: '管理员添加',
                type: 2,
                content: 'addSysUser',    // 设置跳转的url，跳转到对应的页面
                area: ['400px','400px'],
                //btn: ['添加','取消'],
                yes: function (index,layero) {
                    // // 获取弹出层中的form表单元素
                    // var formSubmit=layer.getChildFrame('form', index);
                    // // 提交form表单（不会触发表单验证）
                    // formSubmit.submit();

                    // 获取弹出层中的form表单元素
                    var formSubmit=layer.getChildFrame('form', index);
                    // 获取表单中的提交按钮（在我的表单里第一个button按钮就是提交按钮，使用find方法寻找即可）
                    // var submited = formSubmit.find('button')[0];
                    // 触发点击事件，会对表单进行验证，验证成功则提交表单，失败则返回错误信息
                    submited.click();

                    // 弹出层关闭的操作在子层的js代码中完成

                }
            });
        });


    });
</script>
</body>
</html>